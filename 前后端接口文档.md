# 工程管理/api/project



## 获取工程列表/getAllProject



**简要描述：**

- 搜索/直接获取所有工程列表

**请求方式：**

- POST

```json
{
    "address": "地址",
    "contact": "联系人",
    "contactNo": "联系人电话",
    "name": "姓名"
}
```

**返回示例**

```json
{
    "success": true,
    "code": 200,
    "message": "成功",
    "data": [
        {
            "id": "1323609827441434625",
            "name": "工厂流水线",
            "address": "江南路",
            "contact": "sst",
            "contactNo": null,
            "backgroundId": null,
            "createTime": "2020-11-03 20:55:49",
            "updateTime": "2020-11-03 20:59:36",
            "description": null
        },
        {
            "id": "1323615236600410114",
            "name": "中央空调",
            "address": "江南路",
            "contact": "sst",
            "contactNo": null,
            "backgroundId": null,
            "createTime": "2020-11-03 21:17:19",
            "updateTime": "2020-11-03 21:17:19",
            "description": null
        },
        {
            "id": "1323615254589779970",
            "name": "建筑布局",
            "address": "江南路",
            "contact": "sst",
            "contactNo": null,
            "backgroundId": null,
            "createTime": "2020-11-03 21:17:23",
            "updateTime": "2020-11-03 21:17:23",
            "description": null
        }
    ]
}
```



## 删除工程/deleteProject



**简要描述：**

- 删除某工程

**请求方式：**

- GET

**参数：**

| 参数名 | 必选 | 类型    | 说明         |
| :----- | :--- | :------ | ------------ |
| id     | True | String | 删除工程的id |

**返回示例**

```json
{
    "success": true,
    "code": 200,
    "message": "成功",
    "data": true
}
```



## 新建工程/addProject



**简要描述：**

- 新建工程

**请求方式：**

- POST

**参数：**（name必须）

```json
{
    "name": "1号公寓水电处",
    "address": "江南路",
    "contact": "sst",
    "contactNo": 17854222888,
    "backgroundId": null,
    "description": "记录各节点水电计费数"
}
```

**返回示例**

```json
{
    "success": true,
    "code": 200,
    "message": "成功",
    "data": {
        "id": "1331557139729301506",
        "name": "1号公寓水电处",
        "address": "江南路",
        "contact": "sst",
        "contactNo": "17854222888",
        "backgroundId": null,
        "createTime": "2020-11-25 19:15:35",
        "updateTime": "2020-11-25 19:15:35",
        "description": "记录各节点水电计费数"
    }
}
```




## 复制工程/copyProject



**简要描述：**

- 复制工程列表

**请求方式：**

- POST

**参数：**

| 参数名 | 必选 | 类型 | 说明   |
| :----- | :--- | :--- | ------ |
| id     |      | -    | 工程id |

**返回示例**

```
{ code:'200',message:'复制成功‘}
```



## 打开某一工程/getProject



**简要描述：**

- 打开某一项目

**请求方式：**

- GET

**参数：**

| 参数名 | 必选 | 类型 | 说明         |
| :----- | :--- | :--- | ------------ |
| id     | 必须 | string  | 工程项目的id |

**返回示例**

```json
{
    "success": true,
    "code": 200,
    "message": "成功",
    "data": {
        "layer": {
            "id": "1340664864312549377",
            "createTime": "2020-12-22 17:08:46",
            "updateTime": "2020-12-22 17:08:46",
            "name": "ttt背景",
            "width": 1920,
            "height": 1080,
            "backColor": "#0D0C36",
            "projectId": "1341309283835506689"
        },
        "components": [
            {
                "id": "1341309694663389186",
                "title": "chart",
                "type": "bubble",
                "style": {
                    "position": {
                        "x": 1386.0,
                        "y": 141.0,
                        "w": 272,
                        "h": 257
                    },
                    "borderColor": "#ccccccff",
                    "backColor": "transparent",
                    "foreColor": "transparent",
                    "borderWidth": 1,
                    "transform": 0,
                    "fontSize": 20,
                    "fontColor": "rgb(197, 61, 61)",
                    "fontFamily": "",
                    "visible": true,
                    "identifier": "05792868-624e-7f32-3c21-8b429d05df04"
                },
                "createTime": "2020-12-22 17:08:46",
                "updateTime": "2020-12-22 17:08:46",
                "identifier": "05792868-624e-7f32-3c21-8b429d05df04",
                "name": "bubble3",
                "trafficWay": [
                    {
                        "id": "1341309694814384129",
                        "chartId": "1341309694663389186",
                        "createTime": "2020-12-22 17:08:46",
                        "updateTime": "2020-12-22 17:08:46",
                        "min": 0,
                        "max": 0
                    },
                    {
                        "id": "1341309694814384130",
                        "chartId": "1341309694663389186",
                        "createTime": "2020-12-22 17:08:46",
                        "updateTime": "2020-12-22 17:08:46",
                        "min": 0,
                        "max": 0
                    }
                ]
            },
            {
                "id": "1341309694680166401",
                "title": "chart",
                "type": "value",
                "style": {
                    "position": {
                        "x": 114.0,
                        "y": 224.0,
                        "w": 200,
                        "h": 200
                    },
                    "borderColor": "#ccccccff",
                    "backColor": "transparent",
                    "foreColor": "#ffffff",
                    "borderWidth": 1,
                    "transform": 0,
                    "text": "%",
                    "fontSize": 50,
                    "fontColor": "#ffffff",
                    "fontFamily": "Arial",
                    "visible": true,
                    "identifier": "7385251a-8b2c-ea58-da8c-eaaeeef0e6cf",
                    "dataTotal": 1,
                    "splitNumber": 2
                },
                "createTime": "2020-12-22 17:08:46",
                "updateTime": "2020-12-22 17:08:46",
                "identifier": "7385251a-8b2c-ea58-da8c-eaaeeef0e6cf",
                "name": "value1",
                "trafficWay": []
            },
            {
                "id": "1341309694688555010",
                "title": "chart",
                "type": "liquid-fill",
                "style": {
                    "position": {
                        "x": 266.0,
                        "y": 659.0,
                        "w": 200,
                        "h": 200
                    },
                    "borderColor": "rbg(69, 73, 240)",
                    "backColor": "transparent",
                    "foreColor": "transparent",
                    "borderWidth": 1,
                    "transform": 0,
                    "text": "预定义",
                    "fontSize": 20,
                    "fontColor": "black",
                    "fontFamily": "",
                    "visible": true,
                    "identifier": "178ceb61-6108-a22f-ef4e-c310c281298b",
                    "waveColor": "rbg(68, 145, 253)",
                    "innerColor": "rbg(69, 73, 240)"
                },
                "createTime": "2020-12-22 17:08:46",
                "updateTime": "2020-12-22 17:08:46",
                "identifier": "178ceb61-6108-a22f-ef4e-c310c281298b",
                "name": "liquid-fill2",
                "trafficWay": [
                    {
                        "id": "1341309694831161346",
                        "name": "预定义",
                        "chartId": "1341309694688555010",
                        "createTime": "2020-12-22 17:08:46",
                        "updateTime": "2020-12-22 17:08:46",
                        "min": 0,
                        "max": 100
                    }
                ]
            },
            {
                "id": "1341309694688555011",
                "title": "chart",
                "type": "gauge",
                "style": {
                    "position": {
                        "x": 631.0,
                        "y": 401.0,
                        "w": 200,
                        "h": 200
                    },
                    "borderColor": "#ccccccff",
                    "backColor": "transparent",
                    "foreColor": "transparent",
                    "borderWidth": 1,
                    "transform": 0,
                    "fontSize": 20,
                    "fontColor": "rgb(70, 142, 253)",
                    "fontFamily": "",
                    "visible": true,
                    "identifier": "e0956b31-7b62-1a1c-e40d-dd56d1a22293",
                    "innerColor": "rgb(70, 142, 253)",
                    "splitNumber": 10
                },
                "createTime": "2020-12-22 17:08:46",
                "updateTime": "2020-12-22 17:08:46",
                "identifier": "e0956b31-7b62-1a1c-e40d-dd56d1a22293",
                "name": "gauge3",
                "trafficWay": [
                    {
                        "id": "1341309694847938562",
                        "name": "仪表盘",
                        "chartId": "1341309694688555011",
                        "createTime": "2020-12-22 17:08:46",
                        "updateTime": "2020-12-22 17:08:46",
                        "min": 0,
                        "max": 100
                    }
                ]
            },
            {
                "id": "1341309694696943618",
                "title": "chart",
                "type": "battery",
                "style": {
                    "position": {
                        "x": 671.0,
                        "y": 199.0,
                        "w": 200,
                        "h": 200
                    },
                    "borderColor": "#ccccccff",
                    "backColor": "transparent",
                    "foreColor": "transparent",
                    "borderWidth": 1,
                    "transform": 0,
                    "fontSize": 15,
                    "fontColor": "rgb(245,245,245)",
                    "visible": true,
                    "identifier": "958e6761-db78-33c3-65c7-6f8cc38395e9",
                    "innerColor": "rgb(21,136,209)",
                    "splitNumber": 28
                },
                "createTime": "2020-12-22 17:08:46",
                "updateTime": "2020-12-22 17:08:46",
                "identifier": "958e6761-db78-33c3-65c7-6f8cc38395e9",
                "name": "battery4",
                "trafficWay": [
                    {
                        "id": "1341309694856327169",
                        "name": "累计完成",
                        "chartId": "1341309694696943618",
                        "createTime": "2020-12-22 17:08:46",
                        "updateTime": "2020-12-22 17:08:46",
                        "min": 0,
                        "max": 1000
                    }
                ]
            },
            {
                "id": "1341309694705332226",
                "title": "chart",
                "type": "time-line",
                "style": {
                    "position": {
                        "x": 1314.0,
                        "y": 761.0,
                        "w": 200,
                        "h": 200
                    },
                    "borderColor": "rgb(38,217,255)",
                    "backColor": "transparent",
                    "foreColor": "transparent",
                    "borderWidth": 1,
                    "transform": 0,
                    "visible": true,
                    "identifier": "81eb6ede-b2c8-de17-cfb9-98e547d9e2e8"
                },
                "createTime": "2020-12-22 17:08:46",
                "updateTime": "2020-12-22 17:08:46",
                "identifier": "81eb6ede-b2c8-de17-cfb9-98e547d9e2e8",
                "name": "time-line5",
                "trafficWay": [
                    {
                        "id": "1341309694873104385",
                        "name": "业务1",
                        "symbolSize": 15,
                        "symbolColor": "rgb(160,196,225)",
                        "lineColor": "rgb(255,255,255)",
                        "isSmooth": true,
                        "areaColor": "rgb(61,126,235)",
                        "symbol": "circle",
                        "chartId": "1341309694705332226",
                        "createTime": "2020-12-22 17:08:46",
                        "updateTime": "2020-12-22 17:08:46",
                        "min": 0,
                        "max": 0
                    },
                    {
                        "id": "1341309694881492994",
                        "name": "业务1",
                        "symbolSize": 15,
                        "symbolColor": "rgb(15,197,243)",
                        "lineColor": "rgb(160,196,225)",
                        "isSmooth": true,
                        "areaColor": "rgb(61,126,235)",
                        "symbol": "rect",
                        "chartId": "1341309694705332226",
                        "createTime": "2020-12-22 17:08:46",
                        "updateTime": "2020-12-22 17:08:46",
                        "min": 0,
                        "max": 0
                    }
                ]
            }
        ]
    }
}
```



## 保存某一工程/saveProject



**简要描述：**

- 保存某一项目

**请求方式：**

- POST

**参数：**

```json
{
    "layer": {
        "id": "1340664864312549377",
        "name": "ttt背景",
        "width": 1920,
        "height": 1080,
        "backColor": "#0D0C36",
        "description": null,
        "backgroundImage": null,
        "widthHeightRatio": null
    },
    "components": [
        {
            "title": "chart",
            "type": "bubble",
            "style": {
                "position": {
                    "x": 1386,
                    "y": 141,
                    "w": 272.5,
                    "h": 257.5
                },
                "zIndex": 1,
                "transform": 0,
                "backColor": "transparent",
                "foreColor": "transparent",
                "fontFamily": "",
                "fontColor": "rgb(197, 61, 61)",
                "fontSize": "20",
                "visible": true,
                "angle": 0,
                "borderWidth": 1,
                "borderColor": "#ccccccff",
                "temp": {
                    "position": {
                        "x": 1488.5,
                        "y": 76
                    }
                }
            },
            "trafficWay": [
                {
                    "start": "北京",
                    "to": "上海"
                },
                {
                    "start": "上海",
                    "to": "北京"
                }
            ],
            "identifier": "05792868-624e-7f32-3c21-8b429d05df04",
            "name": "bubble3",
            "insertTime": 1608609433211
        },
        {
            "title": "chart",
            "type": "value",
            "style": {
                "position": {
                    "x": 114,
                    "y": 224,
                    "w": 200,
                    "h": 200
                },
                "backColor": "transparent",
                "foreColor": "#ffffff",
                "zIndex": 1,
                "fontColor": "#ffffff",
                "transform": 0,
                "text": "%",
                "textAlign": "center",
                "fontSize": 50,
                "fontFamily": "Arial",
                "isWeight": 0,
                "isItalic": 0,
                "isUnderLine": 0,
                "splitNumber": 2,
                "dataTotal": 1,
                "lineHeight": 100,
                "visible": true,
                "angle": 0,
                "borderWidth": 1,
                "borderColor": "#ccccccff",
                "type": "text"
            },
            "identifier": "7385251a-8b2c-ea58-da8c-eaaeeef0e6cf",
            "name": "value1",
            "insertTime": 1608609827424
        },
        {
            "title": "chart",
            "type": "liquid-fill",
            "style": {
                "position": {
                    "x": 266,
                    "y": 659,
                    "w": 200,
                    "h": 200
                },
                "zIndex": 1,
                "transform": 0,
                "backColor": "transparent",
                "foreColor": "transparent",
                "fontFamily": "",
                "fontColor": "black",
                "fontSize": "20",
                "text": "预定义",
                "waveColor": "rbg(68, 145, 253)",
                "innerColor": "rbg(69, 73, 240)",
                "borderColor": "rbg(69, 73, 240)",
                "visible": true,
                "angle": 0,
                "borderWidth": 1
            },
            "trafficWay": [
                {
                    "name": "预定义",
                    "max": 100,
                    "min": 0
                }
            ],
            "identifier": "178ceb61-6108-a22f-ef4e-c310c281298b",
            "name": "liquid-fill2",
            "insertTime": 1608609828821
        },
        {
            "title": "chart",
            "type": "gauge",
            "style": {
                "position": {
                    "x": 631,
                    "y": 401,
                    "w": 200,
                    "h": 200
                },
                "zIndex": 1,
                "transform": 0,
                "backColor": "transparent",
                "foreColor": "transparent",
                "fontFamily": "",
                "fontSize": "20",
                "fontColor": "rgb(70, 142, 253)",
                "innerColor": "rgb(70, 142, 253)",
                "splitNumber": 10,
                "visible": true,
                "angle": 0,
                "borderWidth": 1,
                "borderColor": "#ccccccff"
            },
            "trafficWay": [
                {
                    "name": "仪表盘",
                    "max": 100,
                    "min": 0
                }
            ],
            "identifier": "e0956b31-7b62-1a1c-e40d-dd56d1a22293",
            "name": "gauge3",
            "insertTime": 1608609830245
        },
        {
            "title": "chart",
            "type": "battery",
            "style": {
                "position": {
                    "x": 671,
                    "y": 199,
                    "w": 200,
                    "h": 200
                },
                "zIndex": 1,
                "transform": 0,
                "backColor": "transparent",
                "foreColor": "transparent",
                "innerColor": "rgb(21,136,209)",
                "fontColor": "rgb(245,245,245)",
                "fontSize": 15,
                "splitNumber": 28,
                "visible": true,
                "angle": 0,
                "borderWidth": 1,
                "borderColor": "#ccccccff"
            },
            "trafficWay": [
                {
                    "name": "累计完成",
                    "max": 1000
                }
            ],
            "identifier": "958e6761-db78-33c3-65c7-6f8cc38395e9",
            "name": "battery4",
            "insertTime": 1608609833287
        },
        {
            "title": "chart",
            "type": "time-line",
            "style": {
                "position": {
                    "x": 1314,
                    "y": 761,
                    "w": 200,
                    "h": 200
                },
                "zIndex": 1,
                "transform": 0,
                "backColor": "transparent",
                "foreColor": "transparent",
                "borderColor": "rgb(38,217,255)",
                "textColor": "rgba(250,250,250,0.6)",
                "visible": true,
                "angle": 0,
                "borderWidth": 1
            },
            "trafficWay": [
                {
                    "name": "业务1",
                    "symbolSize": 15,
                    "symbolColor": "rgb(160,196,225)",
                    "lineColor": "rgb(255,255,255)",
                    "isSmooth": true,
                    "areaColor": "rgb(61,126,235)",
                    "symbol": "circle"
                },
                {
                    "name": "业务1",
                    "symbolSize": 15,
                    "symbolColor": "rgb(15,197,243)",
                    "lineColor": "rgb(160,196,225)",
                    "isSmooth": true,
                    "areaColor": "rgb(61,126,235)",
                    "symbol": "rect"
                }
            ],
            "identifier": "81eb6ede-b2c8-de17-cfb9-98e547d9e2e8",
            "name": "time-line5",
            "insertTime": 1608609834690
        }
    ],
    "id": "1341309283835506689"
}
```

**返回示例**

```
{   code:'200',message:'保存成功‘}
```



# 公共库管理/api/sharedlibrary



## 获取所有库名/getAllLibrary



**简要描述：**

- 获取所有库名 右侧列表

**请求方式：**

- GET

**参数：**

| 参数名 | 必选 | 类型 | 说明 |
| :----- | :--- | :--- | ---- |
| -      | -    | -    | -    |

**返回示例**

```json
{
    "success": true,
    "code": 200,
    "message": "成功",
    "data": [
        {
            "id": "1330780268372598786",
            "createTime": "2020-11-23 15:48:35",
            "updateTime": "2020-11-23 15:48:35",
            "name": "库2"
        },
        {
            "id": "1330784382586417153",
            "createTime": "2020-11-23 16:04:56",
            "updateTime": "2020-11-23 16:04:56",
            "name": "测试库"
        },
        {
            "id": "1330784695930224642",
            "createTime": "2020-11-23 16:06:11",
            "updateTime": "2020-11-23 16:46:27",
            "name": "修改后库名"
        }
    ]
}
```



## 修改库名

**简要描述：**

- 修改某一库名

**请求方式：**

- GET/POST

**参数：**

| 参数名 | 必选 | 类型   | 说明   |
| :----- | :--- | :----- | ------ |
| id     | true | String | 库的id |
| name   | true | String | 库名   |

## 打开某一库/getLibrary



**简要描述：**

- 获取该库的所有组件

**请求方式：**

- GET

**参数：**

| 参数名 | 必选 | 类型   | 说明   |
| :----- | :--- | :----- | ------ |
| id     | true | String | 库的id |

**返回示例**

```json
{
    "success": true,
    "code": 200,
    "message": "成功",
    "data": [
        {
            "id": "1333674178094792706",
            "createTime": "2020-12-01 15:27:57",
            "updateTime": "2020-12-01 15:27:57",
            "name": "QQ图片20190827193229.jpg",
            "libraryId": "1330780268372598786",
            "url": "http://localhost:8001/images/QQ图片20190827193229.jpg",
            "lujing": "/F:/gradproject/zutai_parent/service/service_project/target/classes/QQ图片20190827193229.jpg"
        },
        {
            "id": "1333678109118091265",
            "createTime": "2020-12-01 15:43:34",
            "updateTime": "2020-12-01 15:43:34",
            "name": "QQ图片20190827193229.jpg",
            "libraryId": "1330780268372598786",
            "url": "http://localhost:8001/images/QQ图片20190827193229.jpg",
            "lujing": "/F:/gradproject/zutai_parent/service/service_project/target/classes/QQ图片20190827193229.jpg"
        }
    ]
}
```

## 上传库组件/uploadFile



**简要描述：**

- 将svg、png等文件上传到某一库当中

**请求方式：**

- POST

**参数：**

| 参数名    | 必选 | 类型          | 说明       |
| :-------- | :--- | :------------ | ---------- |
| libraryId | true | String        | 库的id     |
| fileName  | true | MultipartFile | 上传的文件 |

**返回示例**

```json
{
    "success": true,
    "code": 200,
    "message": "成功",
    "data": "http://localhost:8001/images/e8d4294a4a0652bed5de7fc68ade76c3.jpg"
}
```

# 变量管理/api/variable



## 获取所有变量/getAllVariable



**简要描述：**

- 获取所有变量

**请求方式：**

- GET/POST

**参数：**

| 参数名 | 必选 | 类型 | 说明 |
| :----- | :--- | :--- | ---- |
| -      | -    | -    | -    |

**返回示例**

```json
{
    "success": true,
    "code": 200,
    "message": "成功",
    "data": [
        {
            "id": "1334809662174941185",
            "name": "变量1",
            "dataSourceId": null,
            "createTime": "2020-12-04 18:39:58",
            "updateTime": "2020-12-04 18:39:58",
            "value": 20.0,
            "frequency": 1500,
            "min": 0.0,
            "max": 124.0
        },
        {
            "id": "1334813626060656641",
            "name": "变量2",
            "dataSourceId": null,
            "createTime": "2020-12-04 18:55:43",
            "updateTime": "2020-12-04 18:55:43",
            "value": 20.0,
            "frequency": 500,
            "min": -23.0,
            "max": 10.0
        }
    ]
}
```

## 新建变量/addVariable



**简要描述：**

- 新建变量

**请求方式：**

- POST

**参数：**

```json
{
    "name": "变量2",
    "value": 20.0,
    "frequency": 500,
    "min": -23,
    "max": 10
}
```

**返回示例**

```
{
    "success": true,
    "code": 200,
    "message": "成功",
    "data": {
        "id": "1334813626060656641",
        "name": "变量2",
        "dataSourceId": null,
        "createTime": "2020-12-04 18:55:42",
        "updateTime": "2020-12-04 18:55:42",
        "value": 20.0,
        "frequency": 500,
        "min": -23.0,
        "max": 10.0
    }
}
```

## 删除变量/deleteVariable

**请求方式：**

- GET/POST

**参数：**

| 参数名 | 必选 | 类型   | 说明   |
| :----- | :--- | :----- | ------ |
| id     | true | String | 变量id |

**返回示例**

```
{
    "success": true,
    "code": 200,
    "message": "删除成功",
    "data": null
}
```

# 绑定变量管理/api/bind

## 绑定变量/bindVariable

**简要描述：**

- 控件绑定变量

**请求方式：**

- POST/GET

**参数：**

| 参数名      | 必选 | 类型   | 说明   |
| :---------- | :--- | :----- | ------ |
| componentId | true | String | 控件id |
| variableId  | true | String | 变量id |

**返回示例**

```
{
    "success": true,
    "code": 200,
    "message": "绑定成功",
    "data": null
}
```

## 解除变量绑定/unbindVariable

**简要描述：**

- 解除绑定

**请求方式：**

- POST/GET

**参数：**

| 参数名      | 必选 | 类型   | 说明   |
| :---------- | :--- | :----- | ------ |
| componentId | true | String | 控件id |
| variableId  | true | String | 变量id |

**返回示例**

```json
{
    "success": true,
    "code": 200,
    "message": "成功",
    "data": null
}
```

## 获取控件变量/getVariable

**简要描述：**

- 获取该控件所绑定的所有变量

**请求方式：**

- POST/GET

**参数：**

| 参数名      | 必选 | 类型   | 说明                |
| :---------- | :--- | :----- | ------------------- |
| componentId | true | String | chart控件的子控件id |

**返回示例**

```json
{
    "success": true,
    "code": 200,
    "message": "绑定成功",
    "data": [
        {
            "id": "1334809662174941185",
            "name": "变量1",
            "dataSourceId": null,
            "createTime": "2020-12-04 18:39:58",
            "updateTime": "2020-12-04 18:39:58",
            "value": 20.0,
            "frequency": 1500,
            "min": 0.0,
            "max": 124.0
        },
        {
            "id": "1334813626060656641",
            "name": "变量2",
            "dataSourceId": null,
            "createTime": "2020-12-04 18:55:43",
            "updateTime": "2020-12-04 18:55:43",
            "value": 20.0,
            "frequency": 500,
            "min": -23.0,
            "max": 10.0
        }
    ]
}
```

## 